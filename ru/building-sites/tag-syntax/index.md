---
title: "Синтаксис тегов"
sortorder: "1"
translate: "building-sites/tag-syntax"
---

## Варианты тегов MODX

MODX предоставляет удобный массив тегов, различаемых токеном или набором токенов, которые появляются перед строкой. В приведенной ниже таблице указаны эти токены и где и как они могут быть использованы.

| Тип                                                              | Токен | Пример              | Использование                                                                                                         |
| ---------------------------------------------------------------- | ----- | ------------------- | --------------------------------------------------------------------------------------------------------------------- |
| Коммент                                                          | `-`   | `[[- Comment ]]`    | Определяет неразобранный комментарий.<br>*Например:* `[[- This is a comment]]`                                        |
| [Поле ресурса](building-sites/tag-syntax/common)                 | `*`   | `[[*fieldName]]`    | Выводит значение поля, связанного с текущим ресурсом.<br>*Например:* `[[*pagetitle]]`                                 |
| [Переменная шаблона](building-sites/elements/template-variables) | `*`   | `[[*tvName]]`       | Выведите значение переменной шаблона.<br>*Например:* `[[*tags]]`                                                      |
| [Чанк](building-sites/elements/chunks)                           | `$`   | `[[$chunkName]]`    | Определяет статический сниппет кода для визуализации.<br>*Например:* `[[$header]]`                                    |
| [Сниппет](building-sites/elements/snippets)                      |       | `[[snippetName]]`   | Определяет сниппет кода PHP для выполнения.<br>*Например:* `[[getResources]]`                                         |
| Плейсхолдер                                                      | `+`   | `[[+placeholder]]`  | Определяет плейсхолдер для значений из результатов запроса.<br>*Например:* `[[+pagetitle]]`                           |
| Ссылка                                                           | `~`   | `[[~link]]`         | Возвращает ссылку, полученную из значения.<br>*Например:* `[[~1? &scheme=full]]`                                      |
| [Настройки](building-sites/settings)                             | `++`  | `[[++settingName]]` | Определяет заполнитель специально для значений, определенных в системных настройках.<br>*Например:* `[[++site_name]]` |
| [Язык](extending-modx/internationalization)                      | `%`   | `[[%language]]`     | *Например:* `[[%string? &language=en &namespace=generic &topic=topic]]`                                               |

## Деконструкция тега MODX

Тег MODX может быть расширен за счет дополнительных индикаторов и свойств. Приведенная ниже таблица полностью разбирает тег MODX и иллюстрирует, как и где можно использовать эти необязательные индикаторы и свойства.

| Тип                       | Использование                                                                                                                                                                                          |
| ------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `[[`                      | Определяет открытие тега MODX.                                                                                                                                                                         |
| `!`                       | *Необязательный* флаг без кэширования                                                                                                                                                                  |
| `Token`                   | *Необязательный* Определяет тип элемента.<br>`$` = Чанк,<br>`*` = Поле ресурса / переменная шаблона,<br>`+` = Плейсхолдер *Смотрите выше для большего количества вариантов*                            |
| `Name`                    | Имя значения запрашиваемого элемента.                                                                                                                                                                  |
| `@propertyset`            | Определяет [набор свойств](building-sites/properties-and-property-sets) для использования.                                                                                                             |
| ```:modifier=`value` ```  | Определяет выходной фильтр или модификатор, который будет использоваться.<br>*Например:*```:gt=`0`:then=`Now available!` ```                                                                           |
| `?`                       | Указывает MODX, что свойства сопровождают этот вызов.<br>*Required if properties present*                                                                                                              |
| ``` &property=`value` ``` | Определяет [свойство](building-sites/properties-and-property-sets) и значение, которое будет использоваться с вызовом. Каждый набор свойств разделен `&`.<br>*Например:* ``` &prop1=`1` &prop2=`2` ``` |
| `]]`                      | Определяет закрытие тега MODX.                                                                                                                                                                         |

## Построение тега MODX

Используя и комбинируя всю вышеуказанную информацию, мы можем создать сложный тег MODX, который будет выглядеть следующим образом:

```php
[[!MySnippet@myPropSet:filter1:filter2=`modifier`? &prop1=`x` &prop2=`y`]]
```

Однако, хотя MODX позволяет использовать сложные условные фильтры, пользователи должны быть осторожны при построении сложной логики тегов. В отличие от PHP, если у вас недопустимый синтаксис тега MODX, нет полезных сообщений с номерами строк, указывающими местоположение ошибки.

Наличие тегов, требующих отладки, отрицательно сказывается на чистом виде слоя. Держите их в чистоте и простоте.

Хорошее эмпирическое правило заключается в том, что ваши теги должны помещаться в одну строку, даже если вы разметите их на несколько строк для удобства чтения. Если вы полагаетесь на операторы if и другие условия в своих тегах MODX, тогда может потребоваться пересмотр логики потока.

**Примечание** MODX неоднозначен к пробелам, поэтому оба приведенных ниже примера также будут приемлемы:

```php
[[!getResources?
  &parents=`123`
  &limit=`5`
]]
```

## Свойства

Все теги MODX могут принимать [свойства](building-sites/properties-and-property-sets), не только Сниппеты.

В приведенном ниже примере у нас есть простой блок с именем «Hello».

``` php
Hello [[+name]]!
```

Внутри этого чанка у нас есть настройка плейсхолдера `[[+name]]` для значения, которое будет отображаться. Мы можем передать это значение непосредственно в наш блок с помощью следующего кода:

``` php
[[$Hello? &name=`George`]]
```

Этот вызов будет выглядеть следующим образом:

``` php
Hello George!
```

## Кеширование

Любой тег можно выззвать некэшированным, вставив восклицательный знак сразу после открывающей двойной скобки:

`[[!snippet]]`, `[[!$chunk]]`, `[[!+placeholder]]`, `[[!*template_var]]`, и так далее.

Если у вас есть какая-то расширенная настройка, в которой параметр `site_url` устанавливается для каждого запроса, но ваш `[[~[[*id]]]]` ссылки не генерируются должным образом, помните, что любой тег можно вызвать некэшированным, включая тег ссылки или якоря: `[[!~[[*id]]]]`

Тем не менее, вам понадобится только тогда, когда `site_url` устанавливается динамически, может отличаться для каждого запроса, и вы генерируете полные URL-адреса вместо относительных. Любое нормальное использование может быть кэшировано.

### Порядок разбора

Если вы вызовете некэшированный сниппет, он будет выполнен после обработки всех кэшированных тегов.

Если у вас есть кешированные плейсхолдеры ниже этого, они будут оцениваться до того, как будет выполнен этот сниппет - то есть они получат последнее значение, которое было сохранено в кэше ранее этим сниппетом (или пустым, если еще не установлено).

Если вы хотите вызвать Сниппет без кэширования, который устанавливает плейсхолдер, вам необходимо убедиться, что плейсхолдеры также установлены в некешированные:

``` php
[[!Profile]]
Hello [[!+username]],
```

## Тайминг

В MODX есть несколько тегов синхронизации:

- **`[^qt^]`** - Время запроса - показывает, сколько времени MODX потратил на общение с базой данных
- **`[^q^]`** - Количество запросов - Показывает, сколько запросов к базе данных выполнено MODX
- **`[^p^]`** - Время разбора - показывает, сколько времени понадобилось MODX для разбора страницы
- **`[^t^]`** - Общее время - показывает общее время, затраченное на анализ / рендеринг страницы.
- **`[^s^]`** - Источник - показывает источник страницы, является ли база данных или кеш
- **`[^m^]`** - Использование памяти - Показывает общий объем памяти, занятый для анализа / рендеринга страницы.

### Дополнительная помощь

Поскольку синтаксис тегов проблематичен для многих новичков, существуют инструменты, которые помогут выделить проблемы. Проверьте плагином [SyntaxChecker](https://modx.com/extras/package/syntaxchecker).
